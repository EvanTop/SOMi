import React, { createContext, useContext, useState, useEffect } from "react";

type Language = "en" | "zh";

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const translations = {
  en: {
    "site.title": "SOMI.IM",
    "site.subtitle": "SOMI, I AM HERE!",
    "site.description": "ğŸ‘‹ Your Premium Digital Assets",
    "site.footer": "2026 Spring Festival Promo: Contact for extra discounts!",
    "nav.contact": "Contact",
    "nav.vip": "VIP",
    "login.title": "VIP Access",
    "login.desc": "Enter passkey to access console",
    "login.placeholder": "Passkey",
    "login.enter": "Enter",
    "login.success": "Welcome back, VIP.",
    "login.denied": "Access Denied.",
    "admin.title": "SOMI Admin",
    "admin.dashboard": "Domains",
    "admin.settings": "Settings",
    "admin.logout": "Logout",
    "admin.search": "Search domains...",
    "admin.add": "Add Domain",
    "admin.edit": "Edit Domain",
    "admin.delete": "Delete",
    "admin.status": "Status",
    "admin.price": "Price",
    "admin.actions": "Actions",
    "admin.domain_name": "Domain Name",
    "status.available": "Available",
    "status.sold": "Sold",
    "status.reserved": "Reserved",
    "admin.save": "Save Changes",
    "admin.create": "Create Domain",
    "admin.expiry": "Expiry Date",
    "admin.note": "Note (Private)",
    "admin.export": "Export Data",
    "admin.backup": "Backup/Restore",
    "admin.batch_ops": "Batch Operations",
    "admin.dashboard_overview": "Overview",
    "admin.total_assets": "Total Assets",
    "admin.total_value": "Total Value",
    "admin.expiring_soon": "Expiring Soon",
    "admin.select_all": "Select All",
    "admin.selected": "{count} Selected",
    "admin.export_csv": "Export CSV",
    "admin.export_excel": "Export Excel",
    "admin.backup_download": "Download Backup",
    "admin.backup_restore": "Restore Backup",
    "toast.added": "Domain added successfully",
    "toast.updated": "Domain updated successfully",
    "toast.deleted": "Domain deleted",
    "toast.exported": "Data exported successfully",
    "toast.backup_created": "Backup created successfully",
    "toast.restored": "Data restored successfully",
    "toast.logout": "Logged out successfully",
    "lang.en": "English",
    "lang.zh": "ä¸­æ–‡",
    "admin.import": "Import Domains",
    "import.title": "Batch Import Domains",
    "import.desc": "Paste domain list or upload CSV file to add multiple domains at once.",
    "import.tab_text": "Paste Text",
    "import.tab_csv": "Upload CSV",
    "import.text_label": "Domain List",
    "import.text_placeholder": "Format: domain,price,provider,status\nExample:\nsomi.im, Â¥999, Spaceship, available\nexample.com, $500, GoDaddy, sold",
    "import.csv_label": "Select CSV File",
    "import.preview": "Data Preview",
    "import.confirm": "Import {count} Domains",
    "import.success": "Successfully imported {count} domains",
    "import.error_format": "Invalid format or empty data",
    "import.col_domain": "Domain",
    "import.col_price": "Price",
    "import.col_provider": "Provider",
    "import.col_status": "Status",
    "dashboard.total_domains": "Total Domains",
    "dashboard.total_value": "Total Value",
    "dashboard.expiring_soon": "Expiring Soon",
    "dashboard.sold_domains": "Sold Domains",
    "dashboard.status_dist": "Status Distribution",
    "dashboard.suffix_share": "Extension Share",
    "dashboard.suffix_dist": "Extension Distribution",
    "dashboard.provider_dist": "Provider Distribution",
    "field.expiry": "Expiry Date",
    "field.note": "Note",
    "action.batch_delete": "Delete Selected",
    "action.batch_status": "Update Status",
    "action.selected": "{count} Selected",
    "export.excel": "Export Excel",
    "export.csv": "Export CSV",
    "backup.download": "Backup Data (JSON)",
    "backup.restore": "Restore Data",
    "backup.success": "Data restored successfully",
    "backup.error": "Invalid backup file"
  },
  zh: {
    "site.title": "SOMI.IM",
    "site.subtitle": "æœç±³ï¼Œæˆ‘åœ¨ï¼",
    "site.description": "ğŸ‘‹ æ‚¨çš„è‡»é€‰æ•°å­—èµ„äº§",
    "site.footer": "2026å¹´æ˜¥èŠ‚æ´»åŠ¨ï¼Œè”ç³»è¯¢ä»·å°±æŠ˜ä¸ŠæŠ˜ï¼",
    "nav.contact": "è”ç³»æˆ‘ä»¬",
    "nav.vip": "VIPå…¥å£",
    "login.title": "VIP é€šé“",
    "login.desc": "è¾“å…¥è®¿é—®å¯†é’¥è¿›å…¥ç®¡ç†å°",
    "login.placeholder": "è®¿é—®å¯†é’¥",
    "login.enter": "è¿›å…¥",
    "login.success": "æ¬¢è¿å›æ¥ï¼Œå°Šè´µçš„ä¼šå‘˜ã€‚",
    "login.denied": "è®¿é—®è¢«æ‹’ç»ã€‚",
    "admin.title": "SOMI ç®¡ç†åå°",
    "admin.dashboard": "åŸŸåç®¡ç†",
    "admin.settings": "ç³»ç»Ÿè®¾ç½®",
    "admin.logout": "é€€å‡ºç™»å½•",
    "admin.search": "æœç´¢åŸŸå...",
    "admin.add": "æ·»åŠ åŸŸå",
    "admin.edit": "ç¼–è¾‘åŸŸå",
    "admin.delete": "åˆ é™¤",
    "admin.status": "çŠ¶æ€",
    "admin.price": "ä»·æ ¼",
    "admin.actions": "æ“ä½œ",
    "admin.domain_name": "åŸŸååç§°",
    "status.available": "åœ¨å”®",
    "status.sold": "å·²å”®",
    "status.reserved": "ä¿ç•™",
    "admin.save": "ä¿å­˜ä¿®æ”¹",
    "admin.create": "åˆ›å»ºåŸŸå",
    "admin.expiry": "åˆ°æœŸæ—¶é—´",
    "admin.note": "å¤‡æ³¨ (ç§å¯†)",
    "admin.export": "å¯¼å‡ºæ•°æ®",
    "admin.backup": "å¤‡ä»½/æ¢å¤",
    "admin.batch_ops": "æ‰¹é‡æ“ä½œ",
    "admin.dashboard_overview": "æ¦‚è§ˆ",
    "admin.total_assets": "èµ„äº§æ€»æ•°",
    "admin.total_value": "æ€»ä¼°å€¼",
    "admin.expiring_soon": "å³å°†åˆ°æœŸ",
    "admin.select_all": "å…¨é€‰",
    "admin.selected": "å·²é€‰ {count} é¡¹",
    "admin.export_csv": "å¯¼å‡º CSV",
    "admin.export_excel": "å¯¼å‡º Excel",
    "admin.backup_download": "ä¸‹è½½å¤‡ä»½",
    "admin.backup_restore": "æ¢å¤å¤‡ä»½",
    "toast.added": "åŸŸåæ·»åŠ æˆåŠŸ",
    "toast.updated": "åŸŸåæ›´æ–°æˆåŠŸ",
    "toast.deleted": "åŸŸåå·²åˆ é™¤",
    "toast.exported": "æ•°æ®å¯¼å‡ºæˆåŠŸ",
    "toast.backup_created": "å¤‡ä»½åˆ›å»ºæˆåŠŸ",
    "toast.restored": "æ•°æ®æ¢å¤æˆåŠŸ",
    "toast.logout": "å·²é€€å‡ºç™»å½•",
    "lang.en": "English",
    "lang.zh": "ä¸­æ–‡",
    "admin.import": "æ‰¹é‡å¯¼å…¥",
    "import.title": "æ‰¹é‡å¯¼å…¥åŸŸå",
    "import.desc": "ç²˜è´´åŸŸååˆ—è¡¨æˆ–ä¸Šä¼  CSV æ–‡ä»¶ä»¥æ‰¹é‡æ·»åŠ æ•°æ®ã€‚",
    "import.tab_text": "ç²˜è´´æ–‡æœ¬",
    "import.tab_csv": "ä¸Šä¼  CSV",
    "import.text_label": "åŸŸååˆ—è¡¨",
    "import.text_placeholder": "æ ¼å¼ï¼šåŸŸå,ä»·æ ¼,æ³¨å†Œå•†,çŠ¶æ€\nç¤ºä¾‹ï¼š\nsomi.im, Â¥999, Spaceship, available\nexample.com, $500, GoDaddy, sold",
    "import.csv_label": "é€‰æ‹© CSV æ–‡ä»¶",
    "import.preview": "æ•°æ®é¢„è§ˆ",
    "import.confirm": "å¯¼å…¥ {count} ä¸ªåŸŸå",
    "import.success": "æˆåŠŸå¯¼å…¥ {count} ä¸ªåŸŸå",
    "import.error_format": "æ ¼å¼é”™è¯¯æˆ–æ•°æ®ä¸ºç©º",
    "import.col_domain": "åŸŸå",
    "import.col_price": "ä»·æ ¼",
    "import.col_provider": "æ³¨å†Œå•†",
    "import.col_status": "çŠ¶æ€",
    "dashboard.total_domains": "åŸŸåæ€»æ•°",
    "dashboard.total_value": "æ€»ä¼°å€¼",
    "dashboard.expiring_soon": "å³å°†è¿‡æœŸ",
    "dashboard.sold_domains": "å·²å”®åŸŸå",
    "dashboard.status_dist": "çŠ¶æ€åˆ†å¸ƒ",
    "dashboard.suffix_share": "åç¼€å æ¯”",
    "dashboard.suffix_dist": "åç¼€åˆ†å¸ƒ",
    "dashboard.provider_dist": "æ³¨å†Œå•†åˆ†å¸ƒ",
    "field.expiry": "åˆ°æœŸæ—¶é—´",
    "field.note": "å¤‡æ³¨",
    "action.batch_delete": "æ‰¹é‡åˆ é™¤",
    "action.batch_status": "æ‰¹é‡æ›´æ–°çŠ¶æ€",
    "action.selected": "å·²é€‰ {count} é¡¹",
    "export.excel": "å¯¼å‡º Excel",
    "export.csv": "å¯¼å‡º CSV",
    "backup.download": "å¤‡ä»½æ•°æ® (JSON)",
    "backup.restore": "æ¢å¤æ•°æ®",
    "backup.success": "æ•°æ®æ¢å¤æˆåŠŸ",
    "backup.error": "æ— æ•ˆçš„å¤‡ä»½æ–‡ä»¶"
  }
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export function LanguageProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguage] = useState<Language>("en");

  const t = (key: string) => {
    return (translations[language] as any)[key] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error("useLanguage must be used within a LanguageProvider");
  }
  return context;
}
